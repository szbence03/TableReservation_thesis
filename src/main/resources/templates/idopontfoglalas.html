<!DOCTYPE html>
<html lang="hu" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <title>Asztalfoglalás 1/2</title>
    <style>
        .form-control, .col-form-label, #idopontConfirm {
            font-size: 1.1rem;
        }
    </style>
</head>
<body data-bs-theme="dark" class="bg-body-tertiary">
<header class="p-3 text-bg-dark" data-bs-theme="dark">
    <div th:replace="~{/header :: header}"></div>
</header>

<main class="position-absolute top-50 start-50 translate-middle w-100" style="max-width: 800px;">
    <div class="w-100">
        <h3 class="h3 mb-3 fw-normal text-center">Asztalfoglalás 1/2</h3>
        <div class="d-flex justify-content-center mb-3">
            <div class="progress w-50 mb-5" role="progressbar" aria-label="Foglalás progress" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-bar" style="width: 50%"></div>
            </div>
        </div>
        <form class="bg-dark-subtle p-4 rounded" th:action="@{/idopontfoglalas}" th:object="${foglalas}" method="post">
            <input type="hidden" th:field="*{felhasznaloId}" />
            <div th:if="${hiba}" class="alert alert-danger" role="alert">
                <p th:text="${hiba}" class="text-center"> </p>
            </div>

            <div class="d-flex justify-content-center mb-3">
                <div class="w-50">
                    <div class="row">
                        <label for="vendegek" class="col-sm-5 col-form-label">Vendégek száma:</label>
                        <div class="col-sm-7">
                            <input type="number" class="form-control" id="vendegek" th:classappend="${#fields.hasErrors('vendegek')} ? 'is-invalid' : ''"
                                   th:field="*{vendegek}" min="1" max="8" required>
                            <div class="invalid-feedback"
                                 th:if="${#fields.hasErrors('vendegek')}"
                                 th:errors="*{vendegek}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-center mb-3">
                <div class="w-50">
                    <div class="row">
                        <label for="foglalas" class="col-sm-5 col-form-label">Foglalás ideje:</label>
                        <div class="col-sm-7">
                            <input type="datetime-local" class="form-control" id="foglalas" th:field="*{idopont}" required>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-center mb-3">
                <div class="w-50">
                    <div class="row">
                        <label for="foglalasHossza" class="col-sm-5 col-form-label">Foglalás hossza (perc):</label>
                        <div class="col-sm-7">
                            <input type="number" class="form-control" id="foglalasHossza" th:classappend="${#fields.hasErrors('meddig')} ? 'is-invalid' : ''"
                                   th:field="*{meddig}" min="30" max="180" step="30" required>
                            <div class="invalid-feedback"
                                 th:if="${#fields.hasErrors('meddig')}"
                                 th:errors="*{meddig}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-center mt-4">
                <button type="submit" id="idopontConfirm" class="btn btn-primary w-50">Asztalok listázása</button>
            </div>
        </form>
    </div>
</main>

</body>

<script>

    let foglalasInput = document.getElementById("foglalas");
    foglalasInput.min = new Date().toISOString().slice(0,new Date().toISOString().lastIndexOf(":"));

</script>
</html>